# *** Example ***
# tokens: [CLS] longed for the [MASK] ##ose [MASK] the silence of the laura - - for faces which knew him and smiled upon ##ãƒ„ ; but it was too late to turn back [MASK] . his guide held on for more than [MASK] mile [MASK] the great main street , crossed in the centre of the city , at right angles , [MASK] [MASK] equally [MASK] , at each end of which , miles away [MASK] appeared , dim and distant [MASK] the heads [MASK] [MASK] living stream of passengers , the yellow sand - hills of the desert ; while at the end of [MASK] vista in [MASK] anxiety them gleamed [MASK] [SEP] at last they reached the quay at the opposite end of the street ; [SEP]
# input_ids: 101 23349 2005 1996 103 9232 103 1996 4223 1997 1996 6874 1011 1011 2005 5344 2029 2354 2032 1998 3281 2588 30238 1025 2021 2009 2001 2205 2397 2000 2735 2067 103 1012 2010 5009 2218 2006 2005 2062 2084 103 3542 103 1996 2307 2364 2395 1010 4625 1999 1996 2803 1997 1996 2103 1010 2012 2157 12113 1010 103 103 8053 103 1010 2012 2169 2203 1997 2029 1010 2661 2185 103 2596 1010 11737 1998 6802 103 1996 4641 103 103 2542 5460 1997 5467 1010 1996 3756 5472 1011 4564 1997 1996 5532 1025 2096 2012 1996 2203 1997 103 13005 1999 103 10089 2068 25224 103 102 2012 2197 2027 2584 1996 21048 2012 1996 4500 2203 1997 1996 2395 1025 102
# input_mask: 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
# segment_ids: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
# masked_lm_positions: 4 6 19 22 32 41 43 52 61 62 64 74 80 83 84 104 107 108 111 0
# masked_lm_ids: 16360 1010 1998 2032 2085 1037 2039 2803 2011 2028 12047 1010 2058 1997 1996 1996 2392 1997 1996 0
# masked_lm_weights: 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 0.0
# next_sentence_labels: 0
# #
# *** Example ***
# tokens: [CLS] gold [MASK] surely ! but , wonderful to relate , not an irregular , shape ##less fragment of crude ore , fresh from nature [MASK] [MASK] cr ##ucible , but a bit of jewel ##er ' s hand [MASK] [MASK] ##t in the form of a plain gold ring . [SEP] looking at it [MASK] at ##ten ##scent , he wetlands that [MASK] bore the inscription , " may to cass . " like [MASK] of his fellow gold [MASK] [MASK] , cass was [MASK] ##sti [MASK] . [SEP]
# input_ids: 101 2751 103 7543 999 2021 1010 6919 2000 14396 1010 2025 2019 12052 1010 4338 3238 15778 1997 13587 10848 1010 4840 2013 3267 103 103 13675 21104 1010 2021 1037 2978 1997 13713 2121 1005 1055 2192 103 103 2102 1999 1996 2433 1997 1037 5810 2751 3614 1012 102 2559 2012 2009 103 2012 6528 27654 1010 2002 16630 2008 103 8501 1996 9315 1010 1000 2089 2000 16220 1012 1000 2066 103 1997 2010 3507 2751 103 103 1010 16220 2001 103 16643 103 1012 102 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
# input_mask: 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
# segment_ids: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
# masked_lm_positions: 2 25 26 39 40 55 58 61 63 75 80 81 85 87 0 0 0 0 0 0
# masked_lm_ids: 1010 1005 1055 2594 27528 2062 25499 2387 2009 2087 1011 24071 3565 20771 0 0 0 0 0 0
# masked_lm_weights: 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 0.0 0.0 0.0 0.0 0.0 0.0
# next_sentence_labels: 0
#
# # corpus_path = r"data/corpus.small"
# # f = open(corpus_path, "r", encoding="utf-8")
# # for _ in range(100):
# #     # print(next(f))
# #     print(f.__next__())

import random

class Sentence:
    def __init__(self, line):
        self.line = line


class Doc:
    def __init__(self, doc, neg_sent_sample_num=2, max_mask_num=20):
        self.doc = doc
        self.sentence_text = self.doc.split("\n")
        self.line_num = len(self.sentence_text)
        self.neg_sent_num = neg_sent_sample_num
        self.max_mask_num = max_mask_num

    def create_dataset(self):
        # *** Example ***
        # tokens: [CLS] gold [MASK] surely ! but , wonderful to relate , not an irregular , shape ##less fragment of crude ore , fresh from nature [MASK] [MASK] cr ##ucible , but a bit of jewel ##er ' s hand [MASK] [MASK] ##t in the form of a plain gold ring . [SEP] looking at it [MASK] at ##ten ##scent , he wetlands that [MASK] bore the inscription , " may to cass . " like [MASK] of his fellow gold [MASK] [MASK] , cass was [MASK] ##sti [MASK] . [SEP]
        # input_ids: 101 2751 103 7543 999 2021 1010 6919 2000 14396 1010 2025 2019 12052 1010 4338 3238 15778 1997 13587 10848 1010 4840 2013 3267 103 103 13675 21104 1010 2021 1037 2978 1997 13713 2121 1005 1055 2192 103 103 2102 1999 1996 2433 1997 1037 5810 2751 3614 1012 102 2559 2012 2009 103 2012 6528 27654 1010 2002 16630 2008 103 8501 1996 9315 1010 1000 2089 2000 16220 1012 1000 2066 103 1997 2010 3507 2751 103 103 1010 16220 2001 103 16643 103 1012 102 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
        # input_mask: 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
        # segment_ids: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
        # masked_lm_positions: 2 25 26 39 40 55 58 61 63 75 80 81 85 87 0 0 0 0 0 0
        # masked_lm_ids: 1010 1005 1055 2594 27528 2062 25499 2387 2009 2087 1011 24071 3565 20771 0 0 0 0 0 0
        # masked_lm_weights: 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 0.0 0.0 0.0 0.0 0.0 0.0
        # next_sentence_labels: 0

    def random_neg_sent(self):
        pass


class FileDataset:
    def __init__(self, file_pth, batch_size=64):
        self.file = open(file_pth, "r", encoding="utf-8")
        self.batch_size = batch_size
        self.doc_objs = []

    def create_batch(self):
        doc = ""
        for line in self.file:
            if line == "\n":
                self.doc_objs.append(Doc(doc))
                doc = ""
                continue
            doc = doc + line
        self.doc_objs.append(Doc(doc))




fileDataset = FileDataset('data/corpus.small')
fileDataset.create_batch()






















